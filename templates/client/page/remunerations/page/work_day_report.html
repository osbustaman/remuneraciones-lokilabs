{% extends 'client/base.html' %}

{% load static_tags %}
{% load static %}

{% block title %}Reportes Asistencia{% endblock %}

{% block static_up %}
<link href="{% statics_tag_amanda 'lib/select2/css/select2.min.css' %}" rel="stylesheet">
{% endblock %}

{% block title_page %}Reportes Asistencia{% endblock %}
{% block buttons %}

{% endblock %}

{% block content_page %}
<div class="row row-sm mg-t-15 mg-sm-t-20">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header bg-transparent pd-20">
                <h6 class="card-title tx-uppercase tx-12 mg-b-0">User Transaction History</h6>
            </div><!-- card-header -->
            <div class="table-responsive div-scroll-475">
                <table class="table table-white mg-b-0 tx-12">
                    <thead>
                        <tr class="ard-title tx-uppercase tx-12 mg-b-0">
                            <td class="pd-l-20">
                                <strong>Fecha</strong>
                            </td>
                            <td>
                                <strong>Horario pactado</strong>
                            </td>
                            <td>
                                <strong>Entrada/Salida pactada</strong>
                            </td>
                            <td>
                                <strong>Entrada/Salida marcada</strong>
                            </td>
                            <td>
                                <strong>Total</strong>
                            </td>
                            <td>
                                <strong>Balance</strong>
                            </td>
                            <td>
                                <strong>Observación</strong>
                            </td>
                        </tr>
    
                    </thead>
                    <tbody id="table_data">
                        
                    </tbody>
                </table>
            </div><!-- table-responsive -->
            <div class="card-footer tx-12 pd-y-15 bg-transparent bd-t bd-gray-200">
                <a href=""><i class="fa fa-angle-down mg-r-5"></i>View All Transaction History</a>
            </div><!-- card-footer -->
        </div><!-- card -->
    </div><!-- col-8 -->




    <div class="col-lg-4 mg-t-15 mg-sm-t-20 mg-lg-t-0">
        <div class="card pd-20">
            <h6 class="tx-12 tx-uppercase tx-inverse tx-bold mg-b-15">Sales Report</h6>
            <div class="d-flex mg-b-10">
                <div class="bd-r pd-r-10">
                    <label class="tx-12">Today</label>
                    <p class="tx-lato tx-inverse tx-bold">1,898</p>
                </div>
                <div class="bd-r pd-x-10">
                    <label class="tx-12">This Week</label>
                    <p class="tx-lato tx-inverse tx-bold">32,112</p>
                </div>
                <div class="pd-l-10">
                    <label class="tx-12">This Month</label>
                    <p class="tx-lato tx-inverse tx-bold">72,067</p>
                </div>
            </div>
            <div class="progress mg-b-10">
                <div class="progress-bar wd-50p" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">50%</div>
            </div>
            <p class="tx-12 mg-b-0">Maecenas tempus, tellus eget condimentum rhoncus</p>
        </div>

        <ul class="list-group widget-list-group bg-info mg-t-20">
            <li class="list-group-item rounded-top-0">
                <p class="mg-b-0"><i class="fa fa-cube tx-white-7 mg-r-8"></i><strong class="tx-medium">Retina: 13.3-inch</strong> <span class="text-muted">Display</span></p>
            </li>
            <li class="list-group-item">
                <p class="mg-b-0"><i class="fa fa-cube tx-white-7 mg-r-8"></i><strong class="tx-medium">Intel Iris Graphics 6100</strong> <span class="text-muted">Graphics</span></p>
            </li>
            <li class="list-group-item">
                <p class="mg-b-0"><i class="fa fa-cube tx-white-7 mg-r-8"></i><strong class="tx-medium">500 GB</strong> <span class="text-muted">Flash Storage</span></p>
            </li>
            <li class="list-group-item">
                <p class="mg-b-0"><i class="fa fa-cube tx-white-7 mg-r-8"></i><strong class="tx-medium">3.1 GHz Intel Core i7</strong> <span class="text-muted">Processor</span></p>
            </li>
            <li class="list-group-item rounded-bottom-0">
                <p class="mg-b-0"><i class="fa fa-cube tx-white-7 mg-r-8"></i><strong class="tx-tx-medium">16 GB 1867 MHz DDR3</strong> <span class="text-muted">Memory</span></p>
            </li>
        </ul>
    </div>
</div>
{% endblock %}

{% block static_down %}
<script src="{% statics_tag_amanda 'lib/select2/js/select2.min.js' %}"></script>
{% endblock %}

{% block script_tag %}
<script>


const obtenerDiasDelMes = () => {
        // Obtener la fecha actual
        var fechaActual = new Date();

        // Obtener el número de días en el mes actual
        var ultimoDia = new Date(fechaActual.getFullYear(), fechaActual.getMonth() + 1, 0).getDate();

        // Crear un array con los días del mes (nombre del día y número del día)
        var diasDelMes = [];
        let tbody = "";
        for (var i = 1; i <= ultimoDia; i++) {
            // Crear un objeto Date para obtener el nombre del día
            var fecha = new Date(fechaActual.getFullYear(), fechaActual.getMonth(), i);
            
            // Obtener el nombre del día (en inglés)
            var nombreDia = fecha.toLocaleDateString('es', { weekday: 'long' });

            // Agregar el nombre del día y el número del día al array
            diasDelMes.push({ nombre: nombreDia, numero: i });

            console.log(nombreDia.substring(0, 3));


            const color_text = (nombreDia) => {
                const diasEspeciales = ["sáb", "dom"];
                const color = diasEspeciales.includes(nombreDia.substring(0, 3)) ? "text-danger" : "";
                return color;
            };

            tbody+= `
                <tr class="ard-title tx-uppercase tx-12 mg-b-0 ${color_text(nombreDia)}">
                    <td class="pd-l-20">
                        <strong class="${color_text(nombreDia)}">${i} <small>${nombreDia.substring(0, 3)}</small></strong>
                    </td>
                    <td>
                        -
                    </td>
                    <td>
                        -
                    </td>
                    <td>
                        -
                    </td>
                    <td>
                        -
                    </td>
                    <td>
                        -
                    </td>
                    <td>
                        -
                    </td>
                </tr>
            `;

            

        }

        $('#table_data').html(tbody);
    }

    const obtenerNombreMesActual = () => {
        // Obtener el mes actual
        var fechaActual = new Date();
        var mesActual = fechaActual.getMonth();

        // Array con los nombres de los meses
        var meses = [
            "Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio",
            "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"
        ];

        // Obtener el nombre del mes actual
        var nombreMesActual = meses[mesActual];

        // Mostrar el nombre del mes en la consola (puedes hacer lo que quieras con este dato)
        //console.log(nombreMesActual);

        // También puedes devolver el nombre del mes si necesitas usarlo fuera de la función
        return nombreMesActual;
    }


    const obtenerMeses = () => {
        // Obtener el año y el mes actual
        var fechaActual = new Date();
        var añoActual = fechaActual.getFullYear();
        var mesActual = fechaActual.getMonth();

        // Array con los nombres de los meses
        var meses = [
            "Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio",
            "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"
        ];

        // Obtener el listado de meses del año actual
        var mesesDelAño = [];
        for (var i = 0; i <= mesActual; i++) {
            mesesDelAño.push({ nombre: meses[i], numero: i + 1, año: añoActual });
        }

        // Mostrar el listado de meses en la consola (puedes hacer lo que quieras con estos datos)
        //console.log(mesesDelAño);

        // También puedes devolver el array si necesitas usarlo fuera de la función
        return mesesDelAño;
    }

    obtenerDiasDelMes();
    //obtenerNombreMesActual();
    //obtenerMeses();
</script>
{% endblock %}