{% extends 'client/base.html' %}

{% load static_tags %}
{% load static %}

{% block title %} {{ action }} Colaborador {% endblock %}

{% block static_up %}

{% endblock %}

{% block title_page %} NOMBRE COLABORADOR {% endblock %}
{% block buttons %}
<button type="button" class="btn btn-orange" onclick="redirectToUrl('{% url 'usuario_app:collaborator_file' %}')">Volver <i class="icon ion-arrow-left-a"></i></button>
{% endblock %}

{% block content_page %}

<style>

</style>

    <div class="row row-sm mg-t-15 mg-sm-t-20">


        <div class="col-lg-3 mg-t-15 mg-sm-t-20 mg-lg-t-0">
            <div class="card pd-20">
                <h6 class="tx-12 tx-uppercase tx-inverse tx-bold mg-b-15">Sales Report</h6>
                <div class="d-flex mg-b-10">
                    <div class="bd-r pd-r-10">
                        <label class="tx-12">Today</label>
                        <p class="tx-lato tx-inverse tx-bold">1,898</p>
                    </div>
                    <div class="bd-r pd-x-10">
                        <label class="tx-12">This Week</label>
                        <p class="tx-lato tx-inverse tx-bold">32,112</p>
                    </div>
                    <div class="pd-l-10">
                        <label class="tx-12">This Month</label>
                        <p class="tx-lato tx-inverse tx-bold">72,067</p>
                    </div>
                </div><!-- d-flex -->
                <div class="progress mg-b-10">
                    <div class="progress-bar wd-50p" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">50%</div>
                </div>
                <p class="tx-12 mg-b-0">Maecenas tempus, tellus eget condimentum rhoncus</p>
            </div><!-- card -->

            <ul class="list-group widget-list-group bg-info mg-t-20">
                <div class="card pd-20">
                    <div class="pd-10 bd">
                        <ul class="nav nav-pills flex-column" role="tablist">
                            <li id="datos_personales" class="nav-item"><a class="nav-link active" data-toggle="tab" href="#" role="tab" aria-expanded="true">Datos Personales</a></li>
                            {% if user_id %} 
                            <li id="datos_laborales" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Datos Laborales</a></li>
                            <li id="datos_previsionales" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Datos Previsionales</a></li>
                            <li id="cargas_familiares" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Cargas Familiares</a></li>
                            <li id="horario" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Horario</a></li>
                            <li id="datos_pago" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Datos de Pago</a></li>
                            <li id="vacaciones_ausencia" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Vacaciones y Ausencias</a></li>
                            <li id="finiquito" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Finiquito</a></li>
                            <li id="documentos" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Documentos</a></li>
                            <li id="conceptos_remuneraciones" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Concepto Remuneraciones</a></li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
            </ul>
        </div><!-- col-4 -->

        <div class="col-lg-9">
            <div class="card table-responsive div-scroll-500">
                <div class="card pd-10 pd-sm-20 form-layout form-layout-5">
                    {% include "client/page/usuario/forms/colaboradores/datos_personales.html" %}
                    {% include "client/page/usuario/forms/colaboradores/datos_laborales.html" %}
                    {% include "client/page/usuario/forms/colaboradores/datos_previsionales.html" %}
                    {% include "client/page/usuario/forms/colaboradores/cargas_familiares.html" %}
                    {% include "client/page/usuario/forms/colaboradores/horario.html" %}
                    {% include "client/page/usuario/forms/colaboradores/datos_pago.html" %}
                    {% include "client/page/usuario/forms/colaboradores/vacaciones_ausencia.html" %}
                    {% include "client/page/usuario/forms/colaboradores/finiquito.html" %}
                    {% include "client/page/usuario/forms/colaboradores/documentos.html" %}
                    {% include "client/page/usuario/forms/colaboradores/remuneraciones.html" %}
                </div>
            </div><!-- card -->
        </div><!-- col-8 -->

        
    </div>
{% endblock %}

{% block static_down %}


{% endblock %}

{% block script_tag %}
<script>

div_datos_personales.style.display = 'none';
div_datos_laborales.style.display = 'none';
div_datos_previsionales.style.display = 'none';
div_cargas_familiares.style.display = 'none';
div_horario.style.display = 'none';
div_vacaciones_ausencia.style.display = 'none';                 
div_datos_pago.style.display = 'none';                 
div_finiquito.style.display = 'none';
div_documentos.style.display = 'none';
div_remuneraciones.style.display = 'none';


// Esperar a que se cargue el DOM
document.addEventListener('DOMContentLoaded', function() {
    // Obtener todos los elementos li dentro del contenedor ul
    var elementosLi = document.querySelectorAll('.nav-item');

    // Recorrer cada elemento li y agregar un evento clic
    elementosLi.forEach(function(li) {
        li.addEventListener('click', function(event) {
            // Obtener el id del elemento li que se ha hecho clic
            var idClickeado = event.currentTarget.id;

            // Ocultar todos los divs relacionados con los elementos li
            var divs = document.querySelectorAll('[id^="div_"]');
            divs.forEach(function(div) {
                div.style.display = 'none';
            });

            // Mostrar el div relacionado con el elemento li clickeado
            var divRelacionado = document.getElementById('div_' + idClickeado);

            if (divRelacionado) {
                divRelacionado.style.display = 'block';

                switch (idClickeado) {
                    case 'datos_personales':
                        load_datos_personales_ini();
                        load_datos_personales();
                    break;
                    case 'datos_laborales':
                        
                        load_datos_laborales();


                    break;
                    case 'datos_previsionales':
                        console.log('La opción es datos_previsionales');
                    break;
                    case 'cargas_familiares':
                        console.log('La opción es cargas_familiares');
                    break;
                    case 'horario':
                        console.log('La opción es horario');
                    break;
                    case 'datos_pago':
                        console.log('La opción es datos_pago');
                    break;
                    case 'vacaciones_ausencia':
                        console.log('La opción es vacaciones_ausencia');
                    break;
                    case 'finiquito':
                        console.log('La opción es finiquito');
                    break;
                    case 'documentos':
                        console.log('La opción es documentos');
                    break;
                    case 'remuneraciones':
                        console.log('La opción es remuneraciones');
                    break;

                    default:
                        console.log('Opción no reconocida');
                }
            }
        });
    });
});

$('.fc-datepicker').datepicker({
        showOtherMonths: true,
        selectOtherMonths: true,
        dateFormat: 'yy-mm-dd',
    });

    $('.select2-show-search').select2({
        minimumResultsForSearch: ''
    });

    $('.select2-one').select2({
        minimumResultsForSearch: Infinity
    });



const validate_inputs = (form_name) => {
    const formulario = document.getElementById(form_name);
    const elementos = formulario.elements;
    let is_vacio = true;

    for (let i = 0; i < elementos.length; i++) {
        const elemento = elementos[i];
        
        if(elemento.type === "button"){
        }else{
            const value = elemento.value.trim();
            const classes = elemento.className.split(' ');
            const hasRequiredClass = classes.includes('not-required');

            if(classes.includes('select2-search__field')){
            }else{
                if(!hasRequiredClass && classes.includes('select2-show-search')){
                    try{
                        let cant_chars_ue_agreedworkdays = (($('#ue_agreedworkdays').val()).join(', ')).length;
                        if(cant_chars_ue_agreedworkdays === 0){
                            is_vacio = false;
                        }
                    }catch (error){
                        is_vacio = false;
                    }
                    
                }else{
                    if (!hasRequiredClass && (elemento.value).length === 0) {
                        is_vacio = false;
                    }
                }
            }
        }
    }

    if(!is_vacio){
        return false;
    }
    return true;
}
</script>
{% endblock %}