{% extends 'client/base.html' %}

{% load static_tags %}
{% load static %}

{% block title %} {{ action }} Colaborador {% endblock %}

{% block static_up %}

{% endblock %}

{% block title_page %} NOMBRE COLABORADOR {% endblock %}
{% block buttons %}
s
{% endblock %}

{% block content_page %}

<style>

</style>

    <div class="row row-sm mg-t-15 mg-sm-t-20">


        <div class="col-lg-3 mg-t-15 mg-sm-t-20 mg-lg-t-0">
            <div class="card pd-20">
                <h6 class="tx-12 tx-uppercase tx-inverse tx-bold mg-b-15">Sales Report</h6>
                <div class="d-flex mg-b-10">
                    <div class="bd-r pd-r-10">
                        <label class="tx-12">Today</label>
                        <p class="tx-lato tx-inverse tx-bold">1,898</p>
                    </div>
                    <div class="bd-r pd-x-10">
                        <label class="tx-12">This Week</label>
                        <p class="tx-lato tx-inverse tx-bold">32,112</p>
                    </div>
                    <div class="pd-l-10">
                        <label class="tx-12">This Month</label>
                        <p class="tx-lato tx-inverse tx-bold">72,067</p>
                    </div>
                </div><!-- d-flex -->
                <div class="progress mg-b-10">
                    <div class="progress-bar wd-50p" role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">50%</div>
                </div>
                <p class="tx-12 mg-b-0">Maecenas tempus, tellus eget condimentum rhoncus</p>
            </div><!-- card -->

            <ul class="list-group widget-list-group bg-info mg-t-20">
                <div class="card pd-20">
                    <div class="pd-10 bd">
                        <ul class="nav nav-pills flex-column" role="tablist">
                            <li id="datos_personales" class="nav-item"><a class="nav-link active" data-toggle="tab" href="#" role="tab" aria-expanded="true">Datos Personales</a></li>
                            <li id="datos_laborales" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Datos Laborales</a></li>
                            <li id="datos_previsionales" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Datos Previsionales</a></li>
                            <li id="cargas_familiares" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Cargas Familiares</a></li>
                            <li id="horario" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Horario</a></li>
                            <li id="datos_pago" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Datos de Pago</a></li>
                            <li id="vacaciones_ausencia" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Vacaciones y Ausencias</a></li>
                            <li id="finiquito" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Finiquito</a></li>
                            <li id="documentos" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Documentos</a></li>
                            <li id="conceptos_remuneraciones" class="nav-item"><a class="nav-link" data-toggle="tab" href="#" role="tab">Concepto Remuneraciones</a></li>
                        </ul>
                    </div>
                </div>
            </ul>
        </div><!-- col-4 -->

        <div class="col-lg-9">
            <div class="card">
                <div class="card pd-10 pd-sm-20 form-layout form-layout-5">

                    <form action="" id="form" method="post">
                        <div class="row row-xs">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Rut:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <input type="text" class="form-control form-control-sm" id="rut">
                            </div>
                        </div><!-- row -->
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Apellidos:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <input type="text" class="form-control form-control-sm" id="apellidos">
                            </div>
                        </div>
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Nombres:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <input type="text" class="form-control form-control-sm" id="nombres">
                            </div>
                        </div>
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Email:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <input type="text" class="form-control form-control-sm" id="email">
                            </div>
                        </div><!-- row -->
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Dirección:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <input type="text" class="form-control form-control-sm" id="direccion">
                            </div>
                        </div><!-- row -->
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> País:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <select id="pais" class="form-control form-control-sm">
                                    <option value="[Seleccione]"></option>
                                </select>
                            </div>
                        </div><!-- row -->
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Región:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <select id="region" class="form-control form-control-sm">
                                    <option value="[Seleccione]"></option>
                                </select>
                            </div>
                        </div><!-- row -->
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Comuna:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <select id="comuna" class="form-control form-control-sm">
                                    <option value="[Seleccione]"></option>
                                </select>
                            </div>
                        </div><!-- row -->
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Sexo:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <select id="sexo" class="form-control form-control-sm">
                                    <option value="">[Seleccione]</option>
                                </select>
                            </div>
                        </div><!-- row -->
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Estado Civil:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <select id="estado_civil" class="form-control form-control-sm">
                                    <option value="">[Seleccione]</option>
                                </select>
                            </div>
                        </div><!-- row -->
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Es Extranjero?:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <select id="extranjero" class="form-control form-control-sm">
                                    <option value="">[Seleccione]</option>
                                </select>
                            </div>
                        </div><!-- row -->
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Nacionalidad:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <input type="text" class="form-control form-control-sm" id="nacionalidad">
                            </div>
                        </div><!-- row -->
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Fecha Nacimiento:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <input type="text" name="fechanacimiento" class="form-control fc-datepicker form-control-sm" placeholder="YYYY-MM-DD" required id="fechanacimiento">
                            </div>
                        </div><!-- row -->
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Tipo Estudios:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <select id="tipo_estudios" class="form-control form-control-sm">
                                    <option value="">[Seleccione]</option>
                                </select>
                            </div>
                        </div>
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Estado Estudios:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <select id="estado_estudios" class="form-control form-control-sm">
                                    <option value="">[Seleccione]</option>
                                </select>
                            </div>
                        </div>
                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Título:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <input type="text" class="form-control form-control-sm" id="titulo">
                            </div>
                        </div><!-- row -->

                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Licencia Conducir:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <select id="licencia_conducir" class="form-control form-control-sm">
                                    <option value="">[Seleccione]</option>
                                </select>
                            </div>
                        </div><!-- row -->

                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Clase Licencia:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <input type="text" class="form-control form-control-sm" id="clase_licencia">
                            </div>
                        </div><!-- row -->

                        <div class="row row-xs mg-t-20">
                            <label class="col-sm-3 form-control-label"><span class="tx-danger">*</span> Rol:</label>
                            <div class="col-sm-4 mg-t-10 mg-sm-t-0">
                                <select id="rol" class="form-control form-control-sm">
                                    <option value="">[Seleccione]</option>
                                </select>
                            </div>
                        </div><!-- row -->
                    </form>
                    <div class="row row-xs mg-t-30">
                        <div class="col-sm-10 mg-l-auto">
                            <div class="form-layout-footer">
                                <button class="btn btn-info mg-r-5">Guardar</button>
                            </div><!-- form-layout-footer -->
                        </div><!-- col-8 -->
                    </div>
                </div>
            </div><!-- card -->
        </div><!-- col-8 -->

        
    </div>





{% endblock %}

{% block static_down %}


{% endblock %}

{% block script_tag %}
<script>

$('.fc-datepicker').datepicker({
    showOtherMonths: true,
    selectOtherMonths: true,
    dateFormat: 'yy-mm-dd',
});

const datos_personales = document.getElementById('datos_personales');
const formulario = document.getElementById('form');


const load_page = "{% url 'usuario_app:ApiLoadPageColaborator' %}";

axios.get(load_page)
        .then(response => {
            console.log(response)

            let { data: { sexo_dict } } = response;
            let { data: { estado_civil_dict } } = response;
            let { data: { opciones_dict } } = response;
            let { data: { tipo_estudios_dict } } = response;
            
            console.log(tipo_estudios_dict)

            const selectSexo = document.getElementById('sexo'); // Obtener el elemento select por su ID

            // Iterar sobre el objeto generos y crear opciones para cada elemento
            const opciones = Object.entries(sexo_dict).map(([value, label]) => {
                const option = document.createElement('option'); // Crear un elemento opción
                option.value = value; // Establecer el valor de la opción
                option.text = label; // Establecer el texto visible de la opción
                return option; // Devolver la opción creada
            });

            // Agregar las opciones al elemento select
            opciones.forEach(option => {
                selectSexo.appendChild(option); // Agregar la opción al select
            });


            const selectEstadoCivil = document.getElementById('estado_civil'); // Obtener el elemento select por su ID

            // Iterar sobre el objeto generos y crear opciones para cada elemento
            const opcionesEstadoCivil = Object.entries(estado_civil_dict).map(([value, label]) => {
                const option = document.createElement('option'); // Crear un elemento opción
                option.value = value; // Establecer el valor de la opción
                option.text = label; // Establecer el texto visible de la opción
                return option; // Devolver la opción creada
            });

            // Agregar las opciones al elemento select
            opcionesEstadoCivil.forEach(option => {
                selectEstadoCivil.appendChild(option); // Agregar la opción al select
            });


            const selectExtranjero = document.getElementById('extranjero'); // Obtener el elemento select por su ID
            const selectLicenciaConducir = document.getElementById('licencia_conducir'); // Obtener el elemento select por su ID

            // Iterar sobre el objeto generos y crear opciones para cada elemento
            const opcionesSiNo = Object.entries(opciones_dict).map(([value, label]) => {
                const option = document.createElement('option'); // Crear un elemento opción
                option.value = value; // Establecer el valor de la opción
                option.text = label; // Establecer el texto visible de la opción
                return option; // Devolver la opción creada
            });

            // Agregar las opciones al elemento select
            opcionesSiNo.forEach(option => {
                selectExtranjero.appendChild(option); // Agregar la opción al select
                selectLicenciaConducir.appendChild(option); // Agregar la opción al select
            });


            const selectTipoEstudiosDict = document.getElementById('tipo_estudios');

            // Iterar sobre el objeto generos y crear opciones para cada elemento
            const opcionesTipoEstudiosDict = Object.entries(tipo_estudios_dict).map(([value, label]) => {
                const option = document.createElement('option'); // Crear un elemento opción
                option.value = value; // Establecer el valor de la opción
                option.text = label; // Establecer el texto visible de la opción
                return option; // Devolver la opción creada
            });

            // Agregar las opciones al elemento select
            opcionesTipoEstudiosDict.forEach(option => {
                selectTipoEstudiosDict.appendChild(option); // Agregar la opción al select
            });



        })
        .catch(error => {
            console.error('Error en la solicitud:', error.message);
        });


// Agregar un listener para el evento 'click'
datos_personales.addEventListener('click', function() {
    // Acciones a realizar cuando se hace clic en el div
    // Puedes agregar aquí la lógica que deseas ejecutar al hacer clic en el div

    const endpoint = "{% url 'usuario_app:ApiGetPersonalData' user_id %}";

    axios.get(endpoint)
        .then(response => {
            
        })
        .catch(error => {
            console.error('Error en la solicitud:', error.message);
        });
});

</script>
{% endblock %}